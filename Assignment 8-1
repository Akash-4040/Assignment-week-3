#include <iostream>
#include <fstream>
#include <string>
using namespace std;

class BankAccount {
public:
    string name;
    double balance;
    string purchases[10];   // Array to store up to 10 purchase items
    int purchaseCount = 0;  // How many purchases made

    BankAccount(string userName, double startBalance) {
        name = userName;
        balance = startBalance;
    }

    void deposit(double amount) {
        balance = balance + amount;
        saveToFile("Deposit", amount, "");
    }

    void purchase(double amount, string item) {
        if (amount <= balance) {
            balance = balance - amount;
            if (purchaseCount < 10) {
                purchases[purchaseCount] = item;  // save item in array
                purchaseCount++;
            }
            saveToFile("Purchase", amount, item);
        } else {
            cout << "Not enough money for " << item << endl;
        }
    }

    void showBalance() {
        cout << "Current Balance: $" << balance << endl;
    }

    void showPurchases() {
        cout << "Purchase list:\n";
        for (int i = 0; i < purchaseCount; i++) {
            cout << i+1 << ". " << purchases[i] << endl;
        }
    }

    void showHistory() {
        ifstream file("transactions.txt");
        string line;
        while (getline(file, line)) {
            cout << line << endl;
        }
        file.close();
    }

private:
    void saveToFile(string type, double amount, string item) {
        ofstream file("transactions.txt", ios::app);
        if (type == "Deposit") {
            file << type << ": $" << amount << endl;
        } else if (type == "Purchase") {
            file << type << ": $" << amount << " - " << item << endl;
        }
        file.close();
    }
};

int main() {
    BankAccount myAccount("Akash", 100.0);

    myAccount.deposit(50.0);
    myAccount.purchase(30.0, "Snacks");
    myAccount.purchase(40.0, "Shoes");

    myAccount.showBalance();
    myAccount.showPurchases();   // Show purchases stored in the array
    cout << "Transaction History:\n";
    myAccount.showHistory();

    return 0;
}
